<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!--    <script type="module" crossorigin src="myid_assets/index.js"></script>-->
</head>
<body>
<video id="myVideo" muted onplay="onPlay(this)"></video>
<iframe
        src="https://docs.myid.uz/iframe/"
        allow="camera;fullscreen"
        allowfullscreen
        id="myid_iframe"
        border="0"
        width="100%"
        height="100%"
></iframe>
<iframe
        allow="camera;fullscreen"
        allowfullscreen
        border="0"
        width="100%"
        height="100%"
></iframe>

<script>

    const MyIDStatus = {
        EXCEPTION: -1,
        IN_PROGRESS: 0,
        LIVENESS_PASSED: 1,
        LIVENESS_FAILED: 2,
        RETRY: 3,
    };

    window.addEventListener("message", (e) => {
        if (e.data.source !== "MyIDWebSDK") return;
        switch (e.data.status) {
            case MyIDStatus.EXCEPTION:
                console.error("MyID Iframe failed to load properly or a runtime error occurred.", e.data.error);
                break;
            case MyIDStatus.IN_PROGRESS:
                console.log("Client interacted with the iframe.");
                break;
            case MyIDStatus.LIVENESS_PASSED:
                console.log(e.data);
                yourSuccessCallback(e.data);
                break;
            case MyIDStatus.LIVENESS_FAILED:
                console.log(e.data.error_code, e.data.message);
                yourFailCallback(e.data);
                break;
            case MyIDStatus.RETRY:
                console.log("Client is trying again.");
                break;
            default:
                console.log("Unknown status:", e.data);
        }
    });

    const myidIframe = document.getElementById("myid_iframe"); // reference to the DOM node in your markup

    function screenChangeListener(e) {
        myidIframe.contentWindow.postMessage(
            {
                cmd: "screen",
                screen: window.screen,
                height: window.innerHeight,
                width: window.innerWidth,
            },
            "*"
        );
    }

    myidIframe.addEventListener("load", screenChangeListener);
    document.addEventListener("resize", screenChangeListener);

    //cleanup (if using a frontend framework with mountable/unmountable views)

    myidIframe.removeEventListener("load", screenChangeListener);
    document.removeEventListener("resize", screenChangeListener);

</script>

</body>
</html>
